# Maps FS2020 SimVars to gauges.  Metric units are auto-discovered,
# or can be overridden by specifying a `unit` for the metric.
# Raw simvar values can be transformed by specifying
# a python expression as 'fx', where the raw value is passed as a variable `x`
# See README.me for more details.
metrics:
  - metric: heading
    simvar: HEADING_INDICATOR

  - metric: altitude
    simvar: INDICATED_ALTITUDE

  - metric: pressureSetting
    simvar: BAROMETER_PRESSURE

  - metric: pitch
    simvar: ATTITUDE_INDICATOR_PITCH_DEGREES

  - metric: roll
    simvar: ATTITUDE_INDICATOR_BANK_DEGREES

  - metric: turnrate
    simvar: TURN_INDICATOR_RATE

  - metric: slip
    simvar: TURN_COORDINATOR_BALL
    #TODO unit: position

  - metric: airspeed
    simvar: AIRSPEED_INDICATED

  - metric: verticalSpeed
    simvar: VERTICAL_SPEED

  - metric: compass
    simvar: MAGNETIC_COMPASS

  - metric: fuelPressure
    simvar: "ENG_FUEL_PRESSURE:1"

  - metric: oilPressure
    simvar: "ENG_OIL_PRESSURE:1"
    #TODO unit: foot pounds => pounds per square foot?

  - metric: oilTemperature
    simvar: "ENG_OIL_TEMPERATURE:1"

  - metric: engineRPM
    simvar: "ENG_N1_RPM:1"

  - metric: manifoldPressure
    simvar: "ENG_MANIFOLD_PRESSURE:1"

  - metric: cylinderHeadTemp
    simvar: "ENG_CYLINDER_HEAD_TEMPERATURE:1"


todo:
  - metric: nav1obs
    dref: sim/cockpit2/radios/actuators/nav1_obs_deg_mag_pilot

  - metric: nav1course
    dref: sim/cockpit2/radios/actuators/nav1_course_deg_mag_pilot

  - metric: nav1bearing
    dref: sim/cockpit2/radios/indicators/nav1_bearing_deg_mag

  - metric: nav1rel
    dref: sim/cockpit2/radios/indicators/nav1_relative_bearing_deg
    unit: deg

    # difference between actual heading and selected radial
  - metric: nav1relvac
    dref: sim/cockpit2/radios/indicators/nav1_relative_heading_vacuum_deg_pilot

    # heading deviation in 'dots' of 2 degrees? (doesn't seem consistent with xplane display)
  - metric: nav1dots
    dref: sim/cockpit2/radios/indicators/nav1_hdef_dots_pilot

    # nav1_flag_from_to_pilot: 0 is flag, 1 is to, 2 is from.
  - metric: toFrVOR
    dref: sim/cockpit2/radios/indicators/nav1_flag_from_to_pilot
    fx: x - 1    # G3 wants 0 = to, 1 = from

  - metric: reliabilityVOR
    dref: sim/cockpit2/radios/indicators/nav1_flag_from_to_pilot
    fx: x == 0    # G3 wants 1 if unreliable

  #TODO these aren't right yet
  - metric: headingADF
    dref: sim/cockpit2/radios/actuators/adf1_card_heading_deg_mag_pilot
    unit: deg

  - metric: relativeADF
    dref: sim/cockpit2/radios/indicators/adf1_relative_bearing_deg
    unit: deg

  # 0=none,1=left,2=center,3=right,4=all
  - metric: fuelSelector
    dref: sim/cockpit2/fuel/fuel_tank_selector

  # Example of mapping from an XPlane vector to a list of G3 metrics
  - metric: [fuelFront, fuelCenter, fuelRear]
    dref: sim/cockpit2/fuel/fuel_quantity
    unit: gal

  #TODO align date / time units with G3
  - metric: midnightSecondsUTC
    dref: sim/time/zulu_time_sec
    unit: s

  - metric: midnightSecondsLocal
    dref: sim/time/local_time_sec
    unit: s
